---
title: "useEnhancedState"
category: "hook"
summary: "An enhanced version of react useState hook"
description: "An enhanced version of react useState hook that gives us a more practical way to deal with state in functional components."
---

### _An enhanced version of react useState hook that gives us a more practical way to deal with state in functional components._

### API

```javascript
/**
 * @param {any} [initialState]
 * @returns {[any, Function, any, MutableRefObject]}
 */
```

### Source

```javascript
import {
  useState,
  useCallback,
  useDebugValue,
  useRef,
  MutableRefObject,
} from "react";

function useEnhancedState(initialState) {
  const [state, setState] = useState(initialState);
  const [prevState, setPrevState] = useState();
  const stateRef = useRef();

  useDebugValue({ state, prevState });

  const handleSetState = useCallback(
    (payload) =>
      setState((prevState) => {
        setPrevState(prevState);
        const isFunctionalUpdate = typeof payload === "function";
        const newState = isFunctionalUpdate ? payload(prevState) : payload;
        stateRef.current = state;
        return newState;
      }),
    []
  );

  return [state, handleSetState, prevState, stateRef];
}
```

### Example

```javascript
const [state, setState, prevState, stateRef] = useEnhancedState({
  products: [],
});
```
